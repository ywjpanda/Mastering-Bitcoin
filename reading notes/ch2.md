# 第2章 比特币的工作原理
* 2.1 交易、区块、挖矿和区块链
- 2.2 比特币交易
	- 2.2.1 交易的输入和输出
		- 复式记账法账簿
		- 多个输入和多个输出
		- 输出小于输入（交易费用->矿工）
	- 2.2.2 交易链
	- 2.2.3 找零
	- 2.2.4 常见的交易形式
- 2.3 交易的构建
	- 2.3.1 获取正确的输入
		- 要有足够的输入
		- 钱包维护所属钱包地址有效输出
		- 输入可多笔，总会有找零
	- 2.3.2 创建交易输出
		- 输出以脚本（script）的形式
		- 输出总额少一些->给了矿工
	- 2.3.4 将交易加入总账簿（Ledger）
		- 1. 交易的传送
			- 比特币网络的目的 - 将交易和区块传播给所有参与者
		- 2. 如何传播
			- 比特币节点
			- 新的交易发送给节点
			- 节点转发没有见过的有效节点给所有其他节点
				- 传播技巧 - 泛滥（flooding）
		- 3. Bob的视角
- 2.4 比特币挖矿
	- 交易被挖矿所检验
	- 交易被打包进区块
		- 打包过程 - 大量计算
		- 检验已被证明 - 少量计算
	- 挖矿作用
		- 检验所有交易
		- 创造新的比特币
	- 非对称性
		- **成本** 和 **回报** 的平衡
		- **解起来困难** - **验证很容易**
		- 难度可以调整
		- *工作量证明*
			- 区块头和随机数 -> SHA256 -> 出现解答
			- 第一个找到的矿工 -> WIN -> 发布到区块链上
- 2.5 在区块中挖掘交易
	- 按照最高交易的手续费进行排序
	- 创建新的区块
		- 填入交易和之前区块的指纹
		- 为新的区块计算工作量证明
		- 包含一条特殊交易
			- 挖矿的报酬
			- 交易的手续费
- 2.6 消费交易
	- 每个客户端可以独立验证交易是否合法



![图片](https://github.com/ywjpanda/Mastering-Bitcoin/blob/main/pic/ch2.jpeg?raw=true)

